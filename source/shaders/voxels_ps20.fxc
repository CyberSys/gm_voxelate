struct PS_INPUT {
	float4 pos		: POSITION;
	float3 color	: COLOR;
	float2 uv		: TEXCOORD0;
	float2 tileBase	: TEXCOORD1;
};

sampler baseTextureSampler	: register( s0 );

const float2 tileSize :  register( c0 );

float4 main( PS_INPUT input ) : COLOR
{
	float4 light = float4( input.color, 1 );

	float4 base_color = tex2D( baseTextureSampler, input.tileBase + (input.uv % 1) * tileSize );

	return base_color * light;
}